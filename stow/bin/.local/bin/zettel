#!/bin/bash

# zettel
# Create file for a 'Zettelkasten' from the terminal

if [ $# -lt 1 ]; then
    echo "Usage: $(basename "$0") name-of-new-file for new zettel"
    exit 1
fi

nameParam=$1
# use timestamp as unique id
timestamp=$(date "+%Y%m%d%H%M%S")
# create title in the form "YYYYMMDDHHMMSS-name-of-file"
zettelTitle=${timestamp}-${nameParam}
# create markdown filename
zettelFilename=${zettelTitle}.md
# remove dashes with spaces for headline
zettelHeadline=${nameParam//-/ }
# capitalize first word
zettelHeadline=${zettelHeadline^}
# path to the zettelkasten folder
pathToZettelFolder=~/Sync/wiki/zettelkasten/

# create file and add template
cat << EOF > ${pathToZettelFolder}"${zettelFilename}"
---
title: ${zettelTitle}
date: ${timestamp}
tags: []
---

# ${zettelHeadline}

## Related

## References

EOF

# open new file in editor
"${EDITOR:-vim}" ${pathToZettelFolder}"${zettelFilename}"
